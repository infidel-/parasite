== MAINTENANCE


    ,hardenGripAction: function() {
        this.game.log("You harden your grip on the host.",null);
        var params = this.player.evolutionManager.getParams(_$Improv.IMP_HARDEN_GRIP);
        var tmp = params.attachHoldBase;
!!!        if(!this.attachHost.effects.has(_$AIEffectType.EFFECT_PARALYSIS)) tmp -= Std["int"](this.attachHost.get_strength() / 2);
        var _g = this;
        _g.set_attachHold(_g.attachHold + tmp);
    }


parasite.js:6645 Const.hx:275: You have managed to attach to a host.
parasite.js:6645 Const.hx:275: You detach from the potential host.
parasite.js:6645 Const.hx:275: You harden your grip on the host.
 GameScene.hx:646: Exception: TypeError: Cannot read property 'effects' of null

test first organ evolution - tutorial
amount of AI should really be in percentage to the amount of tiles in visible rect
no movement delay on click in region mode
enter the ship goal - show location and coordinates where to go

game finish message skipped - Const.hx:275: Mission accomplished. I can return to the HQ now. Goodbye, Earth. For now.
parasite.js:6650 Const.hx:275: You have won the game!
no message on game finish window

One of:
1) add generic resource needed for all evolution past level 1 (harvested from humans?)
2) automate evolution after it's trivialized by biomineral + assimilation
3) require something special for each improvement evolution - like moving to specific area

== CURRENT

test gameplay
new gui (with mouse support for everything)
  hud
  inventory
  evolution
  organs
  debug (or move debug to console)
make use computer action more convenient (add to hud?)
? show all selected difficulties in knowledge window

== GROUP: ACTIVE MEASURES

habitat + assimilation: distance 64
after building l2 battery and assim, there's nothing stopping the player from evolving everything available...

need to play more to determine if that is necessary:
?? smell-based improvement [opens up for research on group knowledge]: parasite can accurately detect which people are team members. needs a special organ.
?? psychology skill: can vaguely detect which people are team members and has false positives

==
RADIO IMPROVEMENT

police radio gives access to radio messages and opens up way to:

radio transceiver improvement:
lv1 - listen to police/security radio
lv2 - listen to
lv3 - listen to cellphone comms

when player has that improv, each time someone uses a phone/radio, an animation of radiowaves is played on top of the NPC

em noise/ecm jammer improvement:
lv1 - civilians and police cannot call for help in small radius
lv2 - radius+
lv3 - radius++

habitat detection alert improvement:
no levels - marks with a red + on map, gives a message

1) find police radio/security radio
2) evolve radio receiver
3) grow receiver
==================================
LATER
most of the improvements and skills should come from special conditions, like people professions, traits, finding locations, etc
need a way to get more generic improvements to lower difficulty a bit and have some options

scenes (sometimes need forensics)
  spawn readables and other clues only on scenes
  this will fix the weird thing that important stuff is lying everywhere
police station -> forensics expert -> forensics
? news (newspapers, mobile)
books - forensics guide (15%), sherlock holmes (10%)

fast travel:
  public transport
  roads on region map leading to facilities (and disable walking in wilderness)
  fast travel on roads when in car
    entering a car
  disallow travel outside of city bounds by foot (no sewers)?
  disguise skill - allows hiding parasite without using improv
  disguise + assimilation allows using public transport and cars
    public transport and car rental costs money (gained from wallets)
  how to gain disguise skill? (books, some professions)
  needs disguise kit?

rename alertness to panic?
area alertness effects (make four rough alertness stages):
  1) civilians start carrying guns and mace
  2) more cops and heavier cop gear
  3) block fast travel
  3) block normal area travel on high alertness
  3) police calling backup brings swat units
    swat units have gas masks and armor
      armor - vest + helmet
  4) curfew and military patrols

citygen - smooth out building tiles when they are not wide enough
what happens on mission failure
scenario work and expansion:
  - alien weapons cache, has a chance of spawning (left by yourself)
  - mission - infiltration
  - mission - research
  - goal - save alien
  - what if player raises alertness in ship location? i should handle that somehow
  - mission - abduction - chance of target being a soldier in a base or vip in facility
  - mission completed, what if spaceship is crashed
  - add spaceship object to global object map or make easier getObject(id) function
  - expand hidden events - opening certain clues will lead to hidden events, that these clues hint on. For ex., ufologists clue:
    'Independent experts and conspiracy theorists may have some knowledge about the events.'
    - should open up a hidden event in some way.
?inventory actions - r1, l1, d1


==
CONSOLE CHEATSHEET:
;le12 - learn about aliens
;le8 - learn location of spaceship

;le11 - learn about aliens (other branch)
;le7 - learn location of spaceship (other branch)

;ge8 - go to spaceship location

;ga10 10 - go to area at 10,10
;gg24 7 - don't change mode, go to x=24, y=7 (area or region)

;s1 - set player stage 1 (human civilian host, tutorial done)
;s2 - set player stage 2 (stage 1 + microhabitat)
;s21 - set player stage 2.1 (stage 2 + camo layer, computer use)
;s22 - set player stage 2.2 (stage 2.1 + biomineral)
;s23 - set player stage 2.3 (stage 2.2 + assimilation)

;ie - info: events list
;ii - info: all improvements and organs list
;ai - add item
;as - add skill
;ao1 - add organ 1
;lt - learn all timeline
;li1 - learn improvement 1
;lia - learn all improvements at level 3
;lia1 - learn all improvements at level 1

=====
? world generation
? world travel
?? more knowledges
make each AI type more unique
==
"use computer" goal completion should open next optional goal:
  find hacker and probe his brain (an alternative is to grind computer use)
  new area type - university
  add NPC age
  new NPC parameter - job (profession)
  university has professors and students (job types)
  search for a person with high skill X interface
  sub-menus:
    "u" opens "use item" menu
    "computer" item opens sub-menu
      "search for timeline info",
      "search for a person with high Computer Use skill"
  pressing "." will repeat previous "use" command
gathering clues through hacking?
HDD/laptop/smartphone as a clue source
  needs to be hacked with computer science skill
    only hackers possess it (look above)

==
SCENARIO: CULT

sanity stat for the followers (they can get totally mad in the process)
high-level control path improv (research dopamine) that puts a euphoria-inducing biodrone on the host
  humans stay as loyal but free agents that can do the tasks set by the player
build a cult of followers
==
SCENARIO: SHADOW OUT OF TIME, GREAT RACE/PNAKOTUS

raise knowledge human society to max and build mind-swap device
raising knowledge requires special evolution imp - memory map
? need to tie in with the original idea
==
SIDE MISSIONS

parasite-related event results (npcs) are put into the list
  time
  severity
group-only events only increase group priority and do not go into the list
the list grows up to X, then randomly removes stuff that overflows it
each turn:
  check if X turns have passed, then treat time passed as a chance bonus
  roll chance
  on success generate news item (group coverup or sanity loss):
    X suicide
    X was gunned down today in a shootout with the local police
    X had been in a terrible accident, dead now
    X had been put into an asylum
    fringe: interview with X (i was possessed by an angel!)
    fringe: body with strange abnormalities was found
  latest news items can be read using the computer
    use computer will probably need a separate window interface at some point

what is the point of side missions?
side missions:
  silence X (reporter, investigator, previous host)
    decreases city-wide alertness
  steal and destroy the body?
==
==
GENERAL IDEAS

sanity (psyche-based)
  sanity loss on parasite-related events
  temp insanity
search in timeline
?? Area -> move some code to game/AreaGame, some to entities/Area
tooltips in area and region mode (type, habitat, clues, events, alertness, etc)
organ actions -> OrganInfo.actionXXX
inventory actions -> ItemInfo.actionXXX
move Const.PLAYER_ACTION into proper classes?
more host traits
  skills:
    marksman, hacker, martial arts expert
  intellect:
    low, medium, high
  will (psyche):
    weak-willed, strong-willed
  body type:
    anorexic - -energy, -str, -con
    weak - -str, -con
    overweight - +energy
    heavily overweight - +energy, -str, -con
    muscular - +energy, +str, +con
some evolution can only happen if player has access to prerequisites, for example, stands on top of some object
more believable city generation - areas, buildings, sidewalk, roadway, car traffic, traffic lights
cops arriving in cars
region mode: do not despawn area until player moves?
military stun rifles for the blackops with greater effect
walkable city sewers (should i?)
electric discharge improv + battery organ + stun attack
parasite smell + dogs + reducing smell intensivity imp
organ damage - organ must heal itself before it becomes active again
limit region access (until some learning flag triggers, initial progression)
?? make tilemap screen-sized and repaint with each movement ??
use debug player stages as basis for a save system (allow saves only on some critical game events)
move all organ actions into EvolutionConst?
evolution fluff
indoor locations - whole building floor, can enter and leave through the exit or stairs
ingame help window with links leading to wiki pages
scene.getSpriteByLayer(layer) - draw lines on this one
write about getPixels/setPixels bug
improvement that lowers passive team distance decrease (reduces amount of residue left)

== BROAD DIRECTIONS
scenario goals test
conspiracy group and group active measures
city generation + city graphics
gui graphics + gui rework to support mouse

more scenario goals
scenes
  ? start the game with a scene (teaches about team agents)
additional skills and acquiring them (locations, jobs, etc)
? make 32x32/64x64 tiles selectable (if someone wants) - need to tweak AI visiblity/hearing radius for larger tilesets


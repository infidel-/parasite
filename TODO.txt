+ message log with scrolling
+ move all windows to TextWindow
+ f1-f7 must always work!
+ tweak control
+ +10 deceased
+ goals subsystem
+ move flags to goals
+ learn npc flag
+ knowing a person's name, job/photo or location will allow researching them further - find the rest of info bits
+ having known laptop or mobile phone in inventory allows player to research info about event npcs with Computer Use skill. Each successful attempt will automatically add +1 info bit for up to 3 npcs in the timeline that have at least name or job info bit known
+ computer use skill
+ info bits are: name, job + photo, location, dead/alive

- "Microhabitat" goal chain (opens after completing GOAL_EVOLVE_ORGAN):
+ "Growing organs and evolving is very inefficient in a hostile environment. I need a microhabitat."
+ GOAL: get "Microhabitat" improvement (passive), onComplete -> give microhabitat knowledge
+ ImprovInfo.onComplete()
+ GOAL: select location in a region (any walkable cell), action "Create habitat" (need "Microhabitat" knowledge). This creates the habitat. Text should say how it's much more safe here.
+ mark habitats on map
- player can build multiple habitats all over region
- ?? limit total amount of habitats by knowledge/improvement
- no energy spend while in habitat with a host, control grows each turn up to 100 
- in case of evolution or organ growth, the energy spend is -20%? (4/turn instead of 5/turn)
- no energy spend while in habitat without a host (but it's not restored)
- can use laptops and cell phones in habitat and only in habitats. "This action requires intense concentration and time. I can only do it in a habitat."
- habitat area does not despawn after leaving. the contents should all stay there
- each habitat has a detection chance (base chance is in area info). each turn player is in region mode that chance is rolled for each habitat.
- when habitat is detected, it's silently marked as "detected" and when player enters it, 4 blackops agents spawn and player cannot leave habitat until they're dead (which is probably impossible). if player actually leaves, habitat is destroyed. i should probably make some habitat imps that will notify player about detection.
- ?? habitat cannot be detected when player is inside. that probably needs to be changed.
- set habitat width, height in area type
- habitat area generator


??? job agent ???
- when done, copy this to docs

=============
=============

Physical clue/Memory contents:
* event person name - allows researching that name
* event person job and photo - allows visually spotting this person in the crowd
* event person location - area x,y - allows actually finding that person
* event location - area x,y - allows gathering physical clues at that location
* event clue - each event note has a counter. filling that counter up will show player the note. there is 1-3 event clues in contents
* event note - rare, only on physical clues, will open full event note

timeline example:
...
Event 3: at (5,5)
 +  The military personnel formed a cordon surrounding the scene.
 -  ? [1/4]
 -  ? [0/4]
Participants:
 -  Jacob Redfield (?) at (?,?) [no photo]
 -  Jacob Redfield (?) at (4,5) [no photo]
 -  Jacob Redfield (soldier) at (4,5) [photo]
 + Jacob Redfield (soldier) at (4,5) [photo] [deceased]
 -  ?
...
Event 20:
  + The military personnel formed a cordon surrounding the scene.
Participants:
 -  Jacob Redfield (?) at (?,?) [no photo]
... +10 deceased persons ...
...
(+ means this person's memory has been mined)

===

scenario/
Scenario - flowchart of event/person/location
Variables
ScenarioAlienCrashLanding - actual scenario contents
Timeline - the events that actually happened
Event  - event contents
Person - event participants
Location - event location
Clue - available clue (generated in process of a game)


===============
===============
spawn player near last event location
modify starting interest/alertness according to scenario flow
military base and facility area types!
area type string id -> enum
RegionArea - change switch type -> tile into map
fix event npcs spawn by job (soldiers go to military bases)
police radio gives access to radio messages
spawn stuff that is seen by player immediately on entering area
remove dead npcs from area.npc on death
make reading notes multiple times?
"+10 persons scanned"?
add some unique traits for agents and soldiers
search in timeline
more readable types


host memory + human society > 50 = access to infoweb
knowledges?

MASTERPLAN
============
area alertness - block normal area travel on high alertness
area interest - should bring something special
police messages should be shown only if player has gained something
world generation
human biology knowledge
canine biology knowledge
city and world travel
operation generation
information web (based on clue gathering)

LATER
=====
- "Biomineralization" goal chain (after "habitat" goal chain):
- GOAL: get "Biomineralization" improvement
- GOAL: grow "Biomineral base" organ. When this organ finishes, special action "Grow a biomineral" appears.
- GOAL: grow biomineral. can only be grown in habitat. current host converts into a biomineral on that cell that supplies additional energy to cells around it. biomineral has a lifetime that depends on host stats.
- while near the biomineral growing organs and evolution is faster

organ actions -> OrganInfo.actionXXX
inventory actions -> ItemInfo.actionXXX
ecm jammer improvement
host perks - for ex, fat people have more energy overall, so they are more desirable
some evolution can only happen if player has access to prerequisites, for example, stands on top of some object
more believable city generation - areas, buildings, sidewalk, roadway, car traffic, traffic lights
cops arriving in cars
fast travel in cars in region mode - entering the car will turn it on
global suspicion and what comes with its growth (no global suspicion?)
region mode: do not despawn area until player moves?
swat + police calling backup brings swat when alertness stage is >= 1
swat units have gas masks and armor
armor - vest + helmet
stunner
walkable city sewers (should i?)
electric discharge improv + battery organ + stun attack
parasite smell + dogs + reducing smell intensivity imp
organ damage - organ must heal itself before it becomes active again
limit region access (until some learning flag triggers, initial progression)


scene. getSpriteByLayer(layer) - draw lines on this one
write about getPixels/setPixels bug
